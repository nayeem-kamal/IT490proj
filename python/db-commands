
use kommando;

-- adding USER table
Create table `users` (
    `id` int NOT NULL AUTO_INCREMENT,
    `username` varchar(255) NOT NULL,
    `email` varchar(255) NOT NULL,
    `password` varchar(60) NOT NULL,
    `firstName` varchar(45) DEFAULT NULL,
    `lastName` varchar(45) DEFAULT NULL,
    `Public` tinyint DEFAULT NULL, 
    `admin` tinyint DEFAULT '0',
    `deactivated` tinyint DEFAULT '0',
    PRIMARY KEY (`id`),
    UNIQUE KEY `username` (`username`),
    UNIQUE KEY `email` (`email`) 
);

-- added Accounts table
CREATE TABLE `Accounts` (
  `id` int NOT NULL AUTO_INCREMENT,
  `account_number` varchar(12) AUTO_INCREMENT,
  `username` int DEFAULT NULL,
  `balance` float DEFAULT '0',
  `account_type` varchar(255) DEFAULT 'Bitcoin',
  `created` datetime DEFAULT CURRENT_TIMESTAMP,
  `modified` datetime DEFAULT NULL,
  `closed` tinyint DEFAULT '0',
  `freeze` tinyint DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `account_number` (`account_number`),
  KEY `username` (`username`)
);

-- added Transactions table
CREATE TABLE `transactions` (
  `id` int NOT NULL AUTO_INCREMENT,
  `sourceAccount` int DEFAULT NULL,
  `destinationAccount` int DEFAULT NULL,
  `totalCost` float NOT NULL,
  `transactionType` varchar(255) DEFAULT NULL,
  `intitialCost` float NOT NULL,
  `created` datetime DEFAULT CURRENT_TIMESTAMP,
  `sourceName` varchar(255) DEFAULT NULL,
  `destinationName` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `source` (`sourceAccount`),
  KEY `destination` (`destinationAccount`)
);
